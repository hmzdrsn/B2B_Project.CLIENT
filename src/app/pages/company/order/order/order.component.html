
<!-- Table -->
<p-table paginatorStyleClass="mt-2" [value]="orders" paginator="true" [rowsPerPageOptions]="[5, 10, 20]" [rows]="5"
    [tableStyle]="{ 'min-width': '25rem', 'padding':'50px 50px 0px 50px'}">
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="name" style="width:20%">İsim <p-sortIcon field="name" /></th>
            <th>Toplam Fiyat</th>
            <th>Sipariş Tarihi</th>
            <th>Sipariş Durumu</th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-order>
        <tr class="h-4rem">
            <td>{{ order.name }}</td>
            <td>{{ order.totalPrice }}</td>
            <td>{{ order.orderDate }}</td>
            <td>
                <p-tag styleClass="p-1 w-4" [severity]="getSeverity(order.orderStatus)" value="{{order.orderStatus}}" />
            </td>
            <td>
                <p-button icon="pi pi-pencil" class="mr-2" [rounded]="true" [outlined]="true" severity="success"
                    (onClick)="editOrder(order.orderId)" />
            </td>
        </tr>
    </ng-template>
</p-table>

<!-- Dialog -->
<div class="card flex justify-content-center">
    <p-dialog header="Sipariş Güncelle" [modal]="true" [(visible)]="visible">
        <div *ngIf="updateOrderModel" class="h-25rem p-4">
            <div class="flex flex-column">
                <div class="field">
                    <label class="block font-bold">Adres:</label>
                    <p class="address-text">{{ updateOrderModel.address }}</p>
                </div>
                <div class="field">
                    <label class="block font-bold">Toplam Fiyat:</label>
                    <p>{{ updateOrderModel.totalPrice | currency:'TRY':'symbol' }}</p>
                </div>
                <div class="field">
                    <label class="block font-bold">Sipariş Tarihi:</label>
                    <p>{{ updateOrderModel.orderDate | date:'short':'':'tr-TR' }}</p>
                </div>
                <div class="field">
                    <label class="block font-bold">Sipariş Durumu:</label>
                    <p-dropdown [options]="orderStatuses" [(ngModel)]="selectedStatus"
                        placeholder="{{updateOrderModel.orderStatus}}" optionLabel="status" (onChange)="selectStatus()"
                        [style]="{'height':'30px', 'width': '200px'}">
                        <ng-template pTemplate="item" let-item>
                            <div class="flex align-items-center">
                                <p-tag [style]="{'height':'25px', 'width': '200px'}" value="{{item.status}}"
                                    [severity]="getSeverity(item.status)"></p-tag>
                            </div>
                        </ng-template>
                    </p-dropdown>
                </div>

                <table class="w-full border-1 border-solid border-300">
                    <thead>
                        <tr>
                            <th class="p-2 border-1 border-solid border-300">Ürün Resmi</th>
                            <th class="p-2 border-1 border-solid border-300">Ürün Adı</th>
                            <th class="p-2 border-1 border-solid border-300">Ürün Fiyatı</th>
                            <th class="p-2 border-1 border-solid border-300">Ürün Miktarı</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of updateOrderModel.orderDetails">
                            <td class="p-2 border-1 border-solid border-300">
                                <img src="https://cdn.dsmcdn.com/ty1307/product/media/images/prod/SPM/PIM/20240509/09/d87218a5-f0d8-3433-adbe-ca91ecd819f6/1_org_zoom.jpg"
                                    style="width: 50px;">
                            </td>
                            <td class="p-2 border-1 border-solid border-300">{{ item.productName }}</td>
                            <td class="p-2 border-1 border-solid border-300">{{ item.unitPrice | currency:'TRY':'symbol'
                                }}</td>
                            <td class="p-2 border-1 border-solid border-300">{{ item.quantity }}</td>
                        </tr>
                    </tbody>
                </table>

                <div class="flex justify-content-between mt-2 mb-2">
                    <button class="dialogbutton" (click)="onSubmit()">Kaydet</button>
                    <button class="dialogbutton" (click)="hideDialog()">İptal</button>
                </div>
                <style>
                    .dialogbutton {
                        height: 40px;
                        width: 75px;
                        background-color: rgb(255, 145, 0);
                        border: none;
                        border-radius: 5px;
                        font-size: 18px;
                        cursor: pointer;
                        color: white;
                    }

                    .dialogbutton:hover {
                        background-color: rgb(252, 194, 120);
                    }
                </style>
            </div>
        </div>

        <div *ngIf="!updateOrderModel">
            <p>Veriler yükleniyor...</p>
        </div>
    </p-dialog>
</div>