<div class="flex justify-content-center mt-5">
    <div class="w-9 p-4 border-round">
        <form  [formGroup]="productForm">
            <div class="grid p-fluid">
                <!-- Name Field -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <input 
                            id="name"
                            class="inputStyles" 
                            pInputText 
                            formControlName="name"
                            [ngClass]="{'is-invalid': name.invalid && (name.dirty || name.touched)}"
                        />
                        <label for="name">Name</label>
                    </p-floatLabel>
                    <div *ngIf="name.invalid && (name.dirty || name.touched)" class="flex error-message">
                        <div *ngIf="name.errors?.['required']">Bu alan zorunludur</div>
                        <div *ngIf="name.errors?.['minlength']">
                            En az {{ name.errors?.['minlength']?.requiredLength }} karakter olmalı (Şu an {{ name.errors?.['minlength']?.actualLength }} karakter).
                        </div>
                        <i class="pi pi-times text-red"></i>
                    </div>
                </div>
                
                <!-- Description Field -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <input 
                        id="description"
                        class="inputStyles" 
                        pInputText 
                        formControlName="description"
                        />
                        <label for="description">Description</label>
                    </p-floatLabel>
                    <div *ngIf="description.invalid && (description.dirty || description.touched)" class="flex error-message">
                        <div *ngIf="description.errors?.['required']">Bu alan zorunludur.</div>
                        <div *ngIf="description.errors?.['minlength']">
                            En az {{ description.errors?.['minlength']?.requiredLength }} karakter olmalı (Şu an {{ description.errors?.['minlength']?.actualLength }} karakter).
                          </div><i class="pi pi-times text-red"></i>
                    </div>
                </div>

                <!-- Price Field -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <p-inputNumber 
                            id="price"
                            inputStyleClass="p-2" 
                            formControlName="price"
                            [minFractionDigits]="2"
                            [maxFractionDigits]="2"
                        ></p-inputNumber>
                        <label for="price">Price</label>
                    </p-floatLabel>
                    <div *ngIf="price.invalid && (price.dirty || price.touched)" class="flex error-message">
                        <div *ngIf="price.errors?.['required']">Bu alan zorunludur.</div>
                        <i class="pi pi-times text-red"></i>
                    </div>
                </div>

                <!-- Product Code Field -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <input 
                            id="productCode"
                            class="inputStyles" 
                            pInputText 
                            formControlName="productCode"
                        />
                        <label for="productCode">Product Code</label>
                    </p-floatLabel>
                    <div *ngIf="productCode.invalid && (productCode.dirty || productCode.touched)" class="flex error-message">
                        <div *ngIf="productCode.errors?.['required']">Bu alan zorunludur.</div>
                        <i class="pi pi-times text-red"></i>
                    </div>
                </div>

                <!-- Stock Field -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <p-inputNumber 
                            id="stock"
                            inputStyleClass="p-2" 
                            formControlName="stock" 
                            [min]="0"
                        ></p-inputNumber>
                        <label for="stock">Stock</label>
                        
                    </p-floatLabel>
                    <div *ngIf="stock.invalid && (stock.dirty || stock.touched)" class="flex error-message">
                        <div *ngIf="stock.errors?.['required']">Bu alan zorunludur.</div>
                        <i class="pi pi-times text-red"></i>
                    </div>
                </div>

                <!-- Category Dropdown -->
                <div class="col-12 md:col-6 mb-4">
                    <p-floatLabel>
                        <p-dropdown 
                            id="categoryId"
                            [options]="categories" 
                            optionLabel="name" 
                            formControlName="categoryId"
                            styleClass="p-2"
                        ></p-dropdown>
                        <label for="categoryId">Category</label>
                    </p-floatLabel>
                    <div *ngIf="categoryId.invalid && (categoryId.dirty || categoryId.touched)" class="flex error-message">
                        <div *ngIf="categoryId.errors?.['required']">Bu alan zorunludur.</div>
                        <i class="pi pi-times text-red"></i>
                    </div>
                </div>

                <!-- File Upload -->
                <div class="col-12 mb-4">
                    <p-fileUpload 
                        mode="advanced" 
                        name="productImages" 
                        multiple="true" 
                        maxFileSize="1000000"
                        chooseLabel="Ürün Resmi Ekle"
                        uploadLabel="Upload"
                        cancelLabel="İptal Et"
                        (onUpload)="onUpload($event)"
                        (onSelect)="onSelect($event)"
                        (onRemove)="onRemove($event)"
                        [showUploadButton]="false"
                        chooseStyleClass="p-2"
                        cancelStyleClass="p-2"
                    ></p-fileUpload>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="mt-4">
                <p-button 
                    label="Kaydet" 
                    icon="pi pi-check" 
                    type="submit"
                    (onClick)="submitForm()"
                    styleClass="p-2"
                    severity="success"
                    iconPos="right"
                ></p-button>
            </div>
        </form>
    </div>
</div>

<style>
    .inputStyles {
        height: 40px;
        width: 100%;
        padding: 5px;
        border: 1px solid #ced4da;
        border-radius: 8px;
        transition: border-color 0.3s;
    }

    .inputStyles:focus {
        border-color: #007bff;
        outline: none;
    }

    .is-invalid {
        border-color: #dc3545;
    }

    .error-message {
        color: #dc3545;
        font-size: 12px;
        margin-top: 4px;
    }


    .mt-4 {
        margin-top: 16px;
    }

    .mb-4 {
        margin-bottom: 16px;
    }
</style>
